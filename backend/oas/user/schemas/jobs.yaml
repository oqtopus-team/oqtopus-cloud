jobs.JobId:
  type: string
  format: uuid
  example: "7af020f6-2e38-4d70-8cf0-4349650ea08c"

jobs.GetJobStatusResponse:
  description: job status
  type: object
  properties:
    jobId:
      $ref: "#/jobs.JobId"
    status:
      $ref: "#/jobs.JobStatus"
  required: [
    jobId,status
  ]

jobs.SubmitJobResponse:
  description: submit a job
  type: object
  properties:
    jobId:
      $ref: '#/components/schemas/jobs.JobId'
  required:
    - jobId

jobs.JobStatus:
  type: string
  enum: ["submitted", "ready", "running", "success", "failed", "cancelled"]
  example: "submitted"

jobs.JobInfo:
  type: object
  properties:
    jobId:
      $ref: "#/jobs.JobId"
    code: {type: string, example: "OPENQASM 3; qubit[2] q; bit[2] c; h q[0]; cnot q[0], q[1]; c = measure q;"}
    name:
      type: string
      example: "Bell State Sampling"
    device:
      type: string
      example: "Kawasaki"
    nQubits:
      description: "Parameter exclusive with nNodes"
      type: integer
    nNodes:
      description: "Parameter exclusive with nQubits<br/>Parameter valid only for 'simulator' devices"
      type: integer
      example: 12
    nShots:
      type: integer
      minimum: 1
      maximum: 1e7
      example: "1000"
    qubitAllocation:
      description: "Parameter valid only for QPU devices"
      type: object
      additionalProperties:
        type: integer
      example:
        "0": 12
        "1": 16
    skipTranspilation:
      type: boolean
      example: false
    seedTranspilation:
      description: "Parameter valid only if skipTranspilation is false"
      type: integer
      example: 873
    seedSimulation:
      description: "Parameter valid only for 'simulator' devices"
      type: integer
      example: 39058567
    roErrorMitigation:
      description: "Parameter valid only for QPU devices"
      type: string
      enum: ["none", "pseudo_inverse", "least_square"]
      example: "pseudo_inverse"
    nPerNode:
      description: "Parameter valid only for simulator devices"
      type: integer
      minimum: 1
      example: 5
    simulationOpt:
      description: "Parameter valid only for simulator devices"
      type: object
      example: {
          optimizationMethod: "light",
          optimizationBlockSize: 1,
          optimizationSwapLevel: 1
        }
    note:
      type: string
      example: "Bell State Sampling Example"
    status:
      $ref: "#/jobs.JobStatus"
    createdAt:
      type: string
      format: date-time
      example: "2022-10-19T11:45:34+09:00"
  required: [
    jobId, code, device, nShots, skipTranspilation, status, createdAt
  ]
  example:
    {
      jobId: "7af020f6-2e38-4d70-8cf0-4349650ea08c",
      code: "OPENQASM 3; qubit[2] q; bit[2] c; h q[0]; cnot q[0], q[1]; c = measure q;",
      name: "Bell State Sampling",
      device: "Kawasaki",
      nNodes: 12,
      nShots: 1000,
      skipTranspilation: false,
      seedTranspilation: 387,
      seedSimulation: 39058567,
      nPerNode: 2,
      simulationOpt: {
        optimizationMethod: "light",
        optimizationBlockSize: 1,
        optimizationSwapLevel: 1
      },
      note: "Bell State Sampling Example",
      status: "submitted",
      createdAt: "2022-10-19T11:45:34+09:00"
    }

jobs.JobDef:
  type: object
  properties:
    code: {type: string, example: "OPENQASM 3; qubit[2] q; bit[2] c; h q[0]; cnot q[0], q[1]; c = measure q;"}
    name:
      type: string
      example: "Bell State Sampling"
    device:
      type: string
      example: "Kawasaki"
    nQubits:
      description: "Parameter exclusive with nNodes"
      type: integer
    nNodes:
      description: "Parameter exclusive with nQubits<br/>Parameter valid only for 'simulator' devices"
      type: integer
      example: 12
    nShots:
      type: integer
      minimum: 1
      maximum: 1e7
      example: "1000"
    qubitAllocation:
      description: "Parameter valid only for QPU devices"
      type: object
      additionalProperties:
        type: integer
      example:
        "0": 12
        "1": 16
    skipTranspilation:
      type: boolean
      default: false
      example: false
    seedTranspilation:
      description: "Parameter valid only if skipTranspilation is false"
      type: integer
      example: 873
    seedSimulation:
      description: "Parameter valid only for 'simulator' devices"
      type: integer
      example: 39058567
    roErrorMitigation:
      description: "Parameter valid only for QPU devices"
      type: string
      enum: ["none", "pseudo_inverse", "least_square"]
      default: "none"
      example: "pseudo_inverse"
    nPerNode:
      description: "Parameter valid only for simulator devices"
      type: integer
      minimum: 1
      example: 5
    simulationOpt:
      description: "Parameter valid only for simulator devices"
      type: object
      example: {
          optimizationMethod: "light",
          optimizationBlockSize: 1,
          optimizationSwapLevel: 1
        }
    note:
      type: string
      example: "Bell State Sampling Example"
  required: [
    code, device, nShots
  ]

jobs.Operator:
  type: array
  items:
    $ref: "#/jobs.SingleOperator"
  example:
    [
      ["X 0 X 1", [1.5, 2.8]],
      ["Y 0 Z 1", [1.2, -2e-8]],
    ]

jobs.SingleOperator:
  type: array
  items:
    anyOf:
      - type: string
        description: "Pauli string"
        example: "X 0 Y 1 Z 5 I 2"
      - type: array
        description: "Real and imaginary components of complex coef value"
        items:
          type: number
        minItems: 2
        maxItems: 2
        example: [1.5, 2.8]
  minItems: 2
  maxItems: 2
