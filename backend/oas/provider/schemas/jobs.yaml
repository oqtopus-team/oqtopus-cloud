jobs.JobId:
  type: string
  format: uuid
  example: "7af020f6-2e38-4d70-8cf0-4349650ea08c"

jobs.InternalJobStatus:
  type: string
  enum: ["submitted", "ready", "running", "success", "failed", "cancelled"]
  example: "submitted"

jobs.JobInfo:
  type: string
  example: "{'code': '{type: string, example: \"OPENQASM 3; qubit[2] q; bit[2] c; h q[0]; cnot q[0], q[1]; c = measure q;\"}', 'Operator': 'X 0 Y 1 Z 5 I 2', 'result': {'00': 5020, '11': 4980}, 'transpiled_code': '', 'reason': ''}"

jobs.TranspilerInfo:
  type: string
  example: "{'qubit_allocation': {'0': 12, '1': 16}, 'skip_transpilation': false, 'seed_transpilation': 873}"

jobs.SimulatorInfo:
  type: string
  example: "{'n_qubits': 5, 'n_nodes': 12, 'n_per_node': 2, 'seed_simulation': 39058567, 'simulation_opt': {'optimization_method': 'light', 'optimization_block_size': 1, 'optimization_swap_level': 1}}"

jobs.MitigationInfo:
  type: string
  example: "{'ro_error_mitigation': 'pseudo_inverse'}"

jobs.JobDef:
  type: object
  properties:
    job_id:
      $ref: "#/jobs.JobId"
    name:
      type: string
      example: "Bell State Sampling"
    description:
      type: string
      example: "Bell State Sampling Example"
    device_id:
      type: string
      example: "Kawasaki"
    shots:
      type: integer
      minimum: 1
      maximum: 1e7
      example: "1000"
    job_type:
      type: string
      example: "'sampling' or 'estimation', 'sse'"
    job_info:
      $ref: "#/jobs.JobInfo"
    transpiler_info:
      $ref: "#/jobs.TranspilerInfo"
    simulator_info:
      $ref: "#/jobs.SimulatorInfo"
    mitigation_info:
      $ref: "#/jobs.MitigationInfo"
    status:
      $ref: "#/jobs.InternalJobStatus"
    created_at:
      type: string
      format: date-time
      example: "2022-10-19T11:45:34+09:00"
    updated_at:
      type: string
      format: date-time
      example: "2022-10-19T11:45:34+09:00"
  required: [
    device_id, shots, status, created_at
  ]
  example:
    {
      job_id: "7af020f6-2e38-4d70-8cf0-4349650ea08c",
      name: "Bell State Sampling",
      description: "Bell State Sampling Example",
      device_id: "Kawasaki",
      job_info: "{'code': '{type: string, example: \"OPENQASM 3; qubit[2] q; bit[2] c; h q[0]; cnot q[0], q[1]; c = measure q;\"}', 'operator': 'X 0 Y 1 Z 5 I 2'}",
      transpiler_info: "{'qubit_allocation': {'0': 12, '1': 16}, 'skip_transpilation': false, 'seed_transpilation': 873}",
      simulator_info: "{'n_qubits': 5, 'n_nodes': 12, 'n_per_node': 2, 'seed_simulation': 39058567, 'simulation_opt': {'optimization_method': 'light', 'optimization_block_size': 1, 'optimization_swap_level': 1}}",
      mitigation_info: "{'ro_error_mitigation': 'pseudo_inverse'}",
      job_type: "sampling",
      shots: 1000,
      status: "submitted",
      created_at: "2022-10-19T11:45:34+09:00",
      updated_at: "2022-10-19T11:45:34+09:00"
    }

jobs.JobStatusUpdate:
  type: object
  properties:
    status:
      type: string
      enum: ["running"]
      example: "running"
  required: [
    status
  ]

jobs.JobStatusUpdateResponse:
  type: object
  properties:
    message:
      type: string
  required:
    - message

jobs.UnfetchedJobsResponse:
  type: array
  items:
    oneOf:
      - $ref: '#/jobs.JobDef'
      - $ref: '#/jobs.JobId'

jobs.InternalFetchableJobStatus:
  type: string
  enum: ["submitted", "cancelling"]
  example: "submitted"

