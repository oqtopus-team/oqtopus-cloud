# tasks

## Description

<details>
<summary><strong>Table Definition</strong></summary>

```sql
CREATE TABLE `tasks` (
  `id` varbinary(16) NOT NULL,
  `owner` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(256) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `device` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `n_qubits` int DEFAULT NULL,
  `n_nodes` int DEFAULT NULL,
  `code` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `action` enum('sampling','estimation') COLLATE utf8mb4_unicode_ci NOT NULL,
  `method` enum('state_vector','sampling') COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shots` int DEFAULT NULL,
  `operator` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `qubit_allocation` text COLLATE utf8mb4_unicode_ci,
  `skip_transpilation` tinyint(1) NOT NULL DEFAULT '0',
  `seed_transpilation` int DEFAULT NULL,
  `seed_simulation` int DEFAULT NULL,
  `n_per_node` int unsigned DEFAULT NULL,
  `simulation_opt` text COLLATE utf8mb4_unicode_ci,
  `ro_error_mitigation` enum('none','pseudo_inverse','least_square') COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `note` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` enum('submitted','QUEUED_FETCHED','RUNNING','COMPLETED','FAILED','cancelling','CANCELLING_FETCHED','CANCELLED') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'submitted',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `device` (`device`),
  CONSTRAINT `tasks_ibfk_1` FOREIGN KEY (`device`) REFERENCES `devices` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
```

</details>

## Columns

| Name | Type | Default | Nullable | Extra Definition | Children | Parents | Comment |
| ---- | ---- | ------- | -------- | ---------------- | -------- | ------- | ------- |
| id | varbinary(16) |  | false |  | [results](results.md) |  |  |
| owner | varchar(64) |  | false |  |  |  |  |
| name | varchar(256) |  | true |  |  |  |  |
| device | varchar(64) |  | false |  |  | [devices](devices.md) |  |
| n_qubits | int |  | true |  |  |  |  |
| n_nodes | int |  | true |  |  |  |  |
| code | text |  | false |  |  |  |  |
| action | enum('sampling','estimation') |  | false |  |  |  |  |
| method | enum('state_vector','sampling') |  | true |  |  |  |  |
| shots | int |  | true |  |  |  |  |
| operator | varchar(1024) |  | true |  |  |  |  |
| qubit_allocation | text |  | true |  |  |  |  |
| skip_transpilation | tinyint(1) | 0 | false |  |  |  |  |
| seed_transpilation | int |  | true |  |  |  |  |
| seed_simulation | int |  | true |  |  |  |  |
| n_per_node | int unsigned |  | true |  |  |  |  |
| simulation_opt | text |  | true |  |  |  |  |
| ro_error_mitigation | enum('none','pseudo_inverse','least_square') |  | true |  |  |  |  |
| note | varchar(1024) |  | true |  |  |  |  |
| status | enum('submitted','QUEUED_FETCHED','RUNNING','COMPLETED','FAILED','cancelling','CANCELLING_FETCHED','CANCELLED') | submitted | false |  |  |  |  |
| created_at | timestamp | CURRENT_TIMESTAMP | true | DEFAULT_GENERATED |  |  |  |

## Constraints

| Name | Type | Definition |
| ---- | ---- | ---------- |
| PRIMARY | PRIMARY KEY | PRIMARY KEY (id) |
| tasks_ibfk_1 | FOREIGN KEY | FOREIGN KEY (device) REFERENCES devices (id) |

## Indexes

| Name | Definition |
| ---- | ---------- |
| device | KEY device (device) USING BTREE |
| PRIMARY | PRIMARY KEY (id) USING BTREE |

## Relations

```mermaid
erDiagram

"results" |o--|| "tasks" : "FOREIGN KEY (task_id) REFERENCES tasks (id)"
"tasks" }o--|| "devices" : "FOREIGN KEY (device) REFERENCES devices (id)"

"tasks" {
  varbinary_16_ id PK
  varchar_64_ owner
  varchar_256_ name
  varchar_64_ device FK
  int n_qubits
  int n_nodes
  text code
  enum__sampling___estimation__ action
  enum__state_vector___sampling__ method
  int shots
  varchar_1024_ operator
  text qubit_allocation
  tinyint_1_ skip_transpilation
  int seed_transpilation
  int seed_simulation
  int_unsigned n_per_node
  text simulation_opt
  enum__none___pseudo_inverse___least_square__ ro_error_mitigation
  varchar_1024_ note
  enum__QUEUED___QUEUED_FETCHED___RUNNING___COMPLETED___FAILED___CANCELLING___CANCELLING_FETCHED___CANCELLED__ status
  timestamp created_at
}
"results" {
  varbinary_16_ task_id PK
  enum__SUCCESS___FAILURE___CANCELLED__ status
  text result
  text reason
  text transpiled_code
  text qubit_allocation
}
"devices" {
  varchar_64_ id PK
  enum__QPU___simulator__ device_type
  enum__AVAILABLE___NOT_AVAILABLE__ status
  datetime restart_at
  int pending_tasks
  int n_qubits
  int n_nodes
  varchar_256_ basis_gates
  varchar_64_ instructions
  text calibration_data
  datetime calibrated_at
  varchar_128_ description
}
```

---

## Sample Data

See [here](../sample/schema/tasks.csv).

> Generated by [tbls](https://github.com/k1LoW/tbls)
